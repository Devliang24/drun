config:
  name: 登录（压缩参数化）
  base_url: ${ENV(BASE_URL)}
  tags: [auth, login, params]
  parameters:
    - username-password-expected_status-expected_success-expected_message:
        - [${ENV(USER_USERNAME)}, ${ENV(USER_PASSWORD)}, 401, false, 用户名或密码错误]
        - [invalid_${short_uid(6)}, invalid_${short_uid(6)}, 401, false, 用户名或密码错误]

steps:
  - name: 尝试登录
    request:
      method: POST
      url: /api/v1/auth/login
      headers:
        Accept: application/json
        Content-Type: application/json
      body:
        username: $username
        password: $password
    validate:
      - eq: [status_code, $expected_status]
      - eq: [$.success, $expected_success]
      - eq: [$.message, $expected_message]
