config:
  name: "示例：登录 + 当前用户（自动 Bearer）"
  base_url: ${ENV(BASE_URL)}
  variables:
    username: ${ENV(USER_USERNAME)}
    password: ${ENV(USER_PASSWORD)}

steps:
  - name: 登录
    request:
      method: POST
      path: /api/v1/auth/login
      body:
        username: $username
        password: $password
    extract:
      token: $.data.access_token
    validate:
      - eq: [status_code, 200]
      - eq: [$.success, true]
      - eq: [$.message, 登录成功]

  - name: 获取当前用户（自动注入鉴权）
    request:
      method: GET
      path: /api/v1/users/me
    validate:
      - eq: [status_code, 200]
      - eq: [$.success, true]
