{
    "openapi": "3.1.0",
    "info": {
        "title": "E-commerce API",
        "description": "FastAPI E-commerce Backend System",
        "version": "1.0.0"
    },
    "paths": {
        "/health": {
            "get": {
                "summary": "Health Check",
                "description": "Health check endpoint with unified response format",
                "operationId": "health_check_health_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                }
            }
        },
        "/": {
            "get": {
                "summary": "Root",
                "description": "Root endpoint with API information",
                "operationId": "root__get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                }
            }
        },
        "/test-error": {
            "get": {
                "summary": "Test Error",
                "description": "Test error response",
                "operationId": "test_error_test_error_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/register": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Register",
                "description": "Register a new user.\n\n- **username**: unique username\n- **email**: unique email address\n- **password**: password (will be hashed)\n- **full_name**: optional full name\n- **shipping_address**: optional shipping address\n\nReturns the created user (without password).",
                "operationId": "register_api_v1_auth_register_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UserCreate"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "additionalProperties": true,
                                    "type": "object",
                                    "title": "Response Register Api V1 Auth Register Post"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login",
                "description": "用户登录接口\n\n使用用户名和密码进行登录，返回JWT访问令牌。\n\n- **username**: 用户名\n- **password**: 密码\n\nReturns JWT access token if login successful.",
                "operationId": "login_api_v1_auth_login_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UserLogin"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "additionalProperties": true,
                                    "type": "object",
                                    "title": "Response Login Api V1 Auth Login Post"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/session": {
            "delete": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Logout",
                "description": "用户登出接口\n\nJWT Token无需服务端状态，客户端直接清除保存的token即可。\n如果需要实现token黑名单，可以将token加入Redis黑名单。",
                "operationId": "logout_api_v1_auth_session_delete",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "additionalProperties": true,
                                    "type": "object",
                                    "title": "Response Logout Api V1 Auth Session Delete"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/users/me": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Get Current User Info",
                "description": "Get current user information.\n\nAccessible by: User, Admin",
                "operationId": "get_current_user_info_api_v1_users_me_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "additionalProperties": true,
                                    "type": "object",
                                    "title": "Response Get Current User Info Api V1 Users Me Get"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Users"
                ],
                "summary": "Update Current User",
                "description": "Update current user information.\n\nAccessible by: User, Admin\n\n- **username**: new username (must be unique)\n- **email**: new email (must be unique)\n- **full_name**: new full name\n- **shipping_address**: new shipping address",
                "operationId": "update_current_user_api_v1_users_me_put",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UserUpdate"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "additionalProperties": true,
                                    "type": "object",
                                    "title": "Response Update Current User Api V1 Users Me Put"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ]
            }
        },
        "/api/v1/categories/": {
            "get": {
                "tags": [
                    "Categories"
                ],
                "summary": "Get All Categories",
                "description": "Get all categories.\n\nAccessible by: Public (no authentication required)\n\nReturns all categories ordered by name.\nThis endpoint is typically used for dropdown menus and navigation.",
                "operationId": "get_all_categories_api_v1_categories__get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Categories"
                ],
                "summary": "[Admin Only] Create Category",
                "description": "Create a new category - **REQUIRES ADMIN ROLE**\n\n⚠️ **Authorization Required**: Admin role only\n\nRegular users will receive 403 Forbidden error.\n\n**Request Body:**\n- **name**: unique category name\n- **description**: optional category description\n\n**Responses:**\n- **201**: Category created successfully\n- **403**: Forbidden - Admin role required\n- **400**: Bad request - Category name already exists\n- **401**: Unauthorized - Invalid credentials",
                "operationId": "create_category_api_v1_categories__post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CategoryCreate"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - Admin role required",
                        "content": {
                            "application/json": {
                                "example": {
                                    "success": false,
                                    "code": 403,
                                    "message": "Not enough permissions",
                                    "timestamp": "2025-09-02T10:00:00.000000",
                                    "request_id": "abc12345"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ]
            }
        },
        "/api/v1/categories/{category_id}": {
            "get": {
                "tags": [
                    "Categories"
                ],
                "summary": "Get Category By Id",
                "description": "Get category by ID.\n\nAccessible by: Public (no authentication required)",
                "operationId": "get_category_by_id_api_v1_categories__category_id__get",
                "parameters": [
                    {
                        "name": "category_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "title": "Category Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/products/": {
            "post": {
                "tags": [
                    "Products"
                ],
                "summary": "[Admin Only] Create Product",
                "description": "Create a new product - **REQUIRES ADMIN ROLE**\n\n⚠️ **Authorization Required**: Admin role only\n\nRegular users will receive 403 Forbidden error.\n\n**Request Body:**\n- **name**: product name\n- **description**: product description\n- **price**: product price (must be positive)\n- **stock**: initial stock quantity\n- **category_id**: ID of the category this product belongs to\n\n**Responses:**\n- **201**: Product created successfully\n- **403**: Forbidden - Admin role required\n- **400**: Bad request - Invalid data\n- **401**: Unauthorized - Invalid credentials",
                "operationId": "create_product_api_v1_products__post",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ProductCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - Admin role required",
                        "content": {
                            "application/json": {
                                "example": {
                                    "success": false,
                                    "code": 403,
                                    "message": "Not enough permissions",
                                    "timestamp": "2025-09-02T10:00:00.000000",
                                    "request_id": "abc12345"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Get Products",
                "description": "Get products with advanced filtering and pagination.\n\nAccessible by: Public (no authentication required)\n\nQuery parameters:\n- **skip**: Number of products to skip (pagination)\n- **limit**: Number of products to return (max 100)\n- **category_id**: Filter by specific category\n- **min_price**: Minimum price filter\n- **max_price**: Maximum price filter\n- **in_stock**: Filter by stock availability (true/false)\n- **search**: Search in product name and description\n- **sort_by**: Field to sort by (name, price, created_at, stock)\n- **sort_order**: Sort order (asc or desc)",
                "operationId": "get_products_api_v1_products__get",
                "parameters": [
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "Number of products to skip",
                            "default": 0,
                            "title": "Skip"
                        },
                        "description": "Number of products to skip"
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "maximum": 100,
                            "minimum": 1,
                            "description": "Number of products to return",
                            "default": 20,
                            "title": "Limit"
                        },
                        "description": "Number of products to return"
                    },
                    {
                        "name": "category_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "integer"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "description": "Filter by category ID",
                            "title": "Category Id"
                        },
                        "description": "Filter by category ID"
                    },
                    {
                        "name": "min_price",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "number",
                                    "minimum": 0
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "description": "Minimum price filter",
                            "title": "Min Price"
                        },
                        "description": "Minimum price filter"
                    },
                    {
                        "name": "max_price",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "number",
                                    "minimum": 0
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "description": "Maximum price filter",
                            "title": "Max Price"
                        },
                        "description": "Maximum price filter"
                    },
                    {
                        "name": "in_stock",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "boolean"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "description": "Filter by stock availability",
                            "title": "In Stock"
                        },
                        "description": "Filter by stock availability"
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "description": "Search in product name and description",
                            "title": "Search"
                        },
                        "description": "Search in product name and description"
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "description": "Field to sort by",
                            "default": "created_at",
                            "title": "Sort By"
                        },
                        "description": "Field to sort by"
                    },
                    {
                        "name": "sort_order",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "pattern": "^(asc|desc)$",
                            "description": "Sort order",
                            "default": "desc",
                            "title": "Sort Order"
                        },
                        "description": "Sort order"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/products/search": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Search Products",
                "description": "Search products by keyword in name and description.",
                "operationId": "search_products_api_v1_products_search_get",
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "description": "Search keyword",
                            "default": "",
                            "title": "Q"
                        },
                        "description": "Search keyword"
                    },
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 0,
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "maximum": 100,
                            "minimum": 1,
                            "default": 20,
                            "title": "Limit"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/products/{product_id}": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Get Product By Id",
                "description": "Get product by ID with category information.\n\nAccessible by: Public (no authentication required)\n\nThis endpoint is heavily cached for performance.",
                "operationId": "get_product_by_id_api_v1_products__product_id__get",
                "parameters": [
                    {
                        "name": "product_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "title": "Product Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/cart/": {
            "get": {
                "tags": [
                    "Shopping Cart"
                ],
                "summary": "Get Cart",
                "description": "Get the current user's shopping cart.\n\nAccessible by: User, Admin\n\nReturns the cart with all items, including product details and calculated totals.",
                "operationId": "get_cart_api_v1_cart__get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "additionalProperties": true,
                                    "type": "object",
                                    "title": "Response Get Cart Api V1 Cart  Get"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ]
            }
        },
        "/api/v1/cart/items": {
            "post": {
                "tags": [
                    "Shopping Cart"
                ],
                "summary": "Add Item To Cart",
                "description": "Add an item to the shopping cart.\n\nAccessible by: User, Admin\n\n- **product_id**: ID of the product to add\n- **quantity**: quantity to add (must be positive)\n\nIf the item already exists in cart, the quantities will be added together.",
                "operationId": "add_item_to_cart_api_v1_cart_items_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CartItemCreate"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "additionalProperties": true,
                                    "type": "object",
                                    "title": "Response Add Item To Cart Api V1 Cart Items Post"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ]
            }
        },
        "/api/v1/cart/add": {
            "post": {
                "tags": [
                    "Shopping Cart"
                ],
                "summary": "Add Item Compat",
                "operationId": "add_item_compat_api_v1_cart_add_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CartItemCreate"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ]
            }
        },
        "/api/v1/cart/items/{product_id}": {
            "delete": {
                "tags": [
                    "Shopping Cart"
                ],
                "summary": "Remove Item From Cart",
                "description": "Remove an item from the shopping cart.\n\nAccessible by: User, Admin",
                "operationId": "remove_item_from_cart_api_v1_cart_items__product_id__delete",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "product_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "title": "Product Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true,
                                    "title": "Response Remove Item From Cart Api V1 Cart Items  Product Id  Delete"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Shopping Cart"
                ],
                "summary": "Update Item Quantity",
                "description": "Update item quantity in the shopping cart.\n\nAccessible by: User, Admin\n\n- **quantity**: new quantity (must be positive)\n\nIf quantity is 0, the item will be removed from cart.",
                "operationId": "update_item_quantity_api_v1_cart_items__product_id__put",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "product_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "title": "Product Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CartItemUpdate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true,
                                    "title": "Response Update Item Quantity Api V1 Cart Items  Product Id  Put"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/cart/remove/{product_id}": {
            "delete": {
                "tags": [
                    "Shopping Cart"
                ],
                "summary": "Remove Item Compat",
                "operationId": "remove_item_compat_api_v1_cart_remove__product_id__delete",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "product_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "title": "Product Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/orders/": {
            "post": {
                "tags": [
                    "Orders"
                ],
                "summary": "Create Order",
                "description": "Create a new order from cart items.\n\nAccessible by: User, Admin\n\n- **shipping_address**: delivery address for the order\n\nThis endpoint performs the complete checkout process:\n1. Validates cart items\n2. Checks inventory availability\n3. Creates order with items\n4. Decreases product stock\n5. Clears the cart\n\nReturns order details or error information.",
                "operationId": "create_order_api_v1_orders__post",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CheckoutRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Get Orders",
                "description": "Get orders based on user role and scope.\n\nAccessible by: User (own orders), Admin (own or all orders)\n\nQuery parameters:\n- **skip**: Number of orders to skip (pagination)\n- **limit**: Number of orders to return (max 100)\n- **status**: Filter by order status (pending, confirmed, shipped, delivered, cancelled)\n- **sort_by**: Field to sort by (created_at, total_price, status)\n- **sort_order**: Sort order (asc or desc)\n- **scope**: 'user' for own orders, 'all' for all orders (admin only)",
                "operationId": "get_orders_api_v1_orders__get",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "Number of orders to skip",
                            "default": 0,
                            "title": "Skip"
                        },
                        "description": "Number of orders to skip"
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "maximum": 100,
                            "minimum": 1,
                            "description": "Number of orders to return",
                            "default": 20,
                            "title": "Limit"
                        },
                        "description": "Number of orders to return"
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "description": "Filter by order status",
                            "title": "Status"
                        },
                        "description": "Filter by order status"
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "description": "Field to sort by",
                            "default": "created_at",
                            "title": "Sort By"
                        },
                        "description": "Field to sort by"
                    },
                    {
                        "name": "sort_order",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "pattern": "^(asc|desc)$",
                            "description": "Sort order",
                            "default": "desc",
                            "title": "Sort Order"
                        },
                        "description": "Sort order"
                    },
                    {
                        "name": "scope",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "pattern": "^(user|all)$",
                            "description": "Order scope: 'user' for own orders, 'all' for all orders (admin only)",
                            "default": "user",
                            "title": "Scope"
                        },
                        "description": "Order scope: 'user' for own orders, 'all' for all orders (admin only)"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/orders/checkout": {
            "post": {
                "tags": [
                    "Orders"
                ],
                "summary": "Checkout Order",
                "description": "Checkout from cart and return full order details (兼容测试/旧版路由)。",
                "operationId": "checkout_order_api_v1_orders_checkout_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CheckoutRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ]
            }
        },
        "/api/v1/orders/admin/all": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Admin Get All Orders",
                "description": "Admin-only: get all orders (兼容测试/旧版路由)。",
                "operationId": "admin_get_all_orders_api_v1_orders_admin_all_get",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "skip",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 0,
                            "default": 0,
                            "title": "Skip"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "maximum": 100,
                            "minimum": 1,
                            "default": 20,
                            "title": "Limit"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Status"
                        }
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "created_at",
                            "title": "Sort By"
                        }
                    },
                    {
                        "name": "sort_order",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "pattern": "^(asc|desc)$",
                            "default": "desc",
                            "title": "Sort Order"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/orders/{order_id}": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Get Order By Id",
                "description": "Get order details by ID.\n\nAccessible by: User (own orders), Admin (any order)",
                "operationId": "get_order_by_id_api_v1_orders__order_id__get",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "order_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "title": "Order Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true,
                                    "title": "Response Get Order By Id Api V1 Orders  Order Id  Get"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/debug/info": {
            "get": {
                "summary": "Debug Info",
                "description": "Debug information (development only)",
                "operationId": "debug_info_debug_info_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "CartItemCreate": {
                "properties": {
                    "product_id": {
                        "type": "integer",
                        "title": "Product Id"
                    },
                    "quantity": {
                        "type": "integer",
                        "title": "Quantity"
                    }
                },
                "type": "object",
                "required": [
                    "product_id",
                    "quantity"
                ],
                "title": "CartItemCreate"
            },
            "CartItemUpdate": {
                "properties": {
                    "quantity": {
                        "type": "integer",
                        "title": "Quantity"
                    }
                },
                "type": "object",
                "required": [
                    "quantity"
                ],
                "title": "CartItemUpdate"
            },
            "CategoryCreate": {
                "properties": {
                    "name": {
                        "type": "string",
                        "title": "Name"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description"
                    }
                },
                "type": "object",
                "required": [
                    "name"
                ],
                "title": "CategoryCreate"
            },
            "CheckoutRequest": {
                "properties": {
                    "shipping_address": {
                        "type": "string",
                        "title": "Shipping Address"
                    }
                },
                "type": "object",
                "required": [
                    "shipping_address"
                ],
                "title": "CheckoutRequest"
            },
            "HTTPValidationError": {
                "properties": {
                    "detail": {
                        "items": {
                            "$ref": "#/components/schemas/ValidationError"
                        },
                        "type": "array",
                        "title": "Detail"
                    }
                },
                "type": "object",
                "title": "HTTPValidationError"
            },
            "ProductCreate": {
                "properties": {
                    "name": {
                        "type": "string",
                        "title": "Name"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description"
                    },
                    "price": {
                        "type": "number",
                        "title": "Price"
                    },
                    "stock": {
                        "type": "integer",
                        "title": "Stock"
                    },
                    "category_id": {
                        "type": "integer",
                        "title": "Category Id"
                    }
                },
                "type": "object",
                "required": [
                    "name",
                    "price",
                    "stock",
                    "category_id"
                ],
                "title": "ProductCreate"
            },
            "UserCreate": {
                "properties": {
                    "username": {
                        "type": "string",
                        "title": "Username"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "title": "Email"
                    },
                    "full_name": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Full Name"
                    },
                    "shipping_address": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Shipping Address"
                    },
                    "password": {
                        "type": "string",
                        "title": "Password"
                    },
                    "role": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Role",
                        "default": "user"
                    }
                },
                "type": "object",
                "required": [
                    "username",
                    "email",
                    "password"
                ],
                "title": "UserCreate"
            },
            "UserLogin": {
                "properties": {
                    "username": {
                        "type": "string",
                        "title": "Username"
                    },
                    "password": {
                        "type": "string",
                        "title": "Password"
                    }
                },
                "type": "object",
                "required": [
                    "username",
                    "password"
                ],
                "title": "UserLogin"
            },
            "UserUpdate": {
                "properties": {
                    "username": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Username"
                    },
                    "email": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "email"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Email"
                    },
                    "full_name": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Full Name"
                    },
                    "shipping_address": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Shipping Address"
                    }
                },
                "type": "object",
                "title": "UserUpdate"
            },
            "ValidationError": {
                "properties": {
                    "loc": {
                        "items": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "integer"
                                }
                            ]
                        },
                        "type": "array",
                        "title": "Location"
                    },
                    "msg": {
                        "type": "string",
                        "title": "Message"
                    },
                    "type": {
                        "type": "string",
                        "title": "Error Type"
                    }
                },
                "type": "object",
                "required": [
                    "loc",
                    "msg",
                    "type"
                ],
                "title": "ValidationError"
            }
        },
        "securitySchemes": {
            "HTTPBearer": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT",
                "description": "JWT Bearer Token Authentication. Login to get access_token, then use: Bearer {token}"
            }
        }
    }
}